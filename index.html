<!DOCTYPE html>
<html>
    <head lang="es">
        <meta charset="utf-8"> 
        <meta name="author" content="Jhoedy Indurain Dominguez Dominguez"> 
        <meta name="description" content="Examen">
        <title>Examen</title>
        <link rel="stylesheet" type="text/css" href="app.css">
    </head>
    <body>
       <h1>LECTOR DE ARCHIVOS CSV</h1>
       <br>
       <br>
       <div id="buttondiv">
        <input type="file" id="inputfile" class= "form-control" accept="text/csv" required/>
        <input type="button" id="viewfile" value="Generar" />
        <input type="button" value="Limpiar" onClick="location.reload();"/>
        <br><br>
      </div>
      <div class="dropzone" id="dropzone">Arrastra el archivo aqui</div>

<br><br><br><br><br><br><br>
    </div>
    <div class="container" id="container">
      <table class="gridtable" id="tableMain">
          <thead>
            
          </thead>
          <tbody>
  
          </tbody>
        </table>
    </div>

       <script>
           (function(){
               var dropzone = document.getElementById('dropzone');

            dropzone.ondrop = function(e){
                e.preventDefault();
                this.className = 'dropzone';
                
            };

            dropzone.ondragover = function(){
                this.className = 'dropzone dragover';
                return false;
            };
            dropzone.ondragleave = function() {
                this.className = 'dropzone';
                return false;
            };

            
        }());
       </script>   

       
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<script>
    $( document ).ready(function() {

        $('#viewfile').click(function () {
            var rdr = new FileReader();
            rdr.onload = function (e) {
              //get the rows into an array
              var therows = e.target.result.split("\n");
              //loop through the rows
              for (var row = 0; row < therows.length; row ++ ) {
                var columns = therows[row].split(",");
                var colcount = columns.length;

                var newrow="<tr><td>" + columns[0] + "</td>";
                for(var i=1;i<colcount;i++){
                     newrow=newrow+("<td>" + columns[i] + "</td>");
                }
                newrow=newrow+"</tr>"
                $('#tableMain').append(newrow);
              }
            }
            rdr.readAsText($("#inputfile")[0].files[0]);
        });

    });
    </script>

</script>
    </body>
</html>